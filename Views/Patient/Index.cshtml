@model IEnumerable<iCareWebApplication.Models.Patient>

@{
    ViewData["Title"] = "Patient List";
}

<h2>Patient List</h2>

<form asp-action="FilterByLocation" method="get">
    <label for="geoCodeId">Filter by State:</label>
    <select id="geoCodeId" name="geoCodeId" class="form-select" onchange="this.form.submit()">
        <option value="">All</option>
        @{
            string[] states = new string[] {
        "Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia",
        "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts",
        "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey",
        "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island",
        "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia",
        "Wisconsin", "Wyoming"
        };
        }
        @for (int i = 0; i < states.Length; i++)
        {
            <option value="@(i + 1)">@states[i] - @(i + 1)</option>
        }
    </select>
</form>




<table class="table">
    <thead>
        <tr>
            <th>Patient ID</th>
            <th>Name</th>
            <th>Date of Birth</th>
            <th>Address</th>
            <th>Phone Number</th>
            <th>Height</th>
            <th>Weight</th>
            <th>Blood Group</th>
            <th>Bed ID</th>
            <th>Treatment Area</th>
            <th>GeoCode ID</th>
            <th>Documents</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var patient in Model)
        {
            <tr>
                <td>@patient.PatientId</td>
                <td>@patient.Name</td>
                <td>@patient.DateOfBirth.ToString("MM/dd/yyyy")</td>
                <td>@patient.Address</td>
                <td>@patient.PhoneNumber</td>
                <td>@patient.Height</td>
                <td>@patient.Weight</td>
                <td>@patient.BloodGroup</td>
                <td>@patient.BedId</td>
                <td>@patient.TreatmentArea</td>
                <td>@patient.GeoCodeId</td>
                <td>@patient.DocumentCount</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@patient.PatientId" class="btn btn-sm btn-primary">Edit</a>
                </td>
                <td>
                    <a asp-controller="PatientTreatment" asp-action="Index" asp-route-patientId="@patient.PatientId" class="btn btn-info">View Treatments</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<p>
    <a asp-action="Create" class="btn btn-primary">Add New Patient</a>
</p>

